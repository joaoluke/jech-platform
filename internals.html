<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Como Funciona - Jech</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="variables.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="internals.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">üöÄ JECH</a>
            <div class="nav-links">
                <a href="index.html">In√≠cio</a>
                <a href="playground.html">Playground</a>
                <a href="docs.html">Documenta√ß√£o</a>
                <a href="internals.html" class="active">Como Funciona</a>
                <a href="https://github.com/joaoluke/jech" target="_blank" rel="noopener noreferrer">
                    <span class="github-icon">GitHub</span>
                </a>
            </div>
        </div>
    </nav>

    <div class="internals-container">
        <header class="internals-header">
            <h1>üîç Por Tr√°s dos Panos</h1>
            <p class="subtitle">Entenda como seu c√≥digo Jech √© processado e executado</p>
        </header>

        <section class="intro-section">
            <div class="intro-card">
                <h2>üéØ O que voc√™ vai aprender</h2>
                <p>
                    Nesta p√°gina, voc√™ vai descobrir como o comando <code>say("hello world");</code> 
                    passa por cada etapa do nosso compilador/interpretador at√© ser executado. 
                    Vamos explorar todas as fases: desde a an√°lise l√©xica at√© a execu√ß√£o final.
                </p>
            </div>
        </section>

        <section class="interactive-demo">
            <h2>üöÄ Demonstra√ß√£o Interativa</h2>
            <p>Digite um c√≥digo Jech e veja como ele √© processado em cada etapa:</p>
            
            <div class="demo-container">
                <div class="code-input-section">
                    <label for="codeInput">C√≥digo Fonte:</label>
                    <textarea id="codeInput" placeholder='say("hello world");'>say("hello world");</textarea>
                    <button id="analyzeBtn" class="btn-analyze">üî¨ Analisar C√≥digo</button>
                </div>

                <div class="pipeline-visualization">
                    <div class="pipeline-step" data-step="1">
                        <div class="step-header">
                            <span class="step-number">1</span>
                            <h3>üìù An√°lise L√©xica (Lexer)</h3>
                            <span class="step-status">‚è≥</span>
                        </div>
                        <div class="step-description">
                            <p>O c√≥digo fonte √© dividido em <strong>tokens</strong> (unidades m√≠nimas de significado).</p>
                            <p class="tech-detail">Cada caractere √© lido e agrupado em categorias: palavras-chave, identificadores, operadores, literais, etc.</p>
                        </div>
                        <div class="step-output" id="lexerOutput">
                            <div class="output-placeholder">Aguardando an√°lise...</div>
                        </div>
                    </div>

                    <div class="pipeline-arrow">‚Üì</div>

                    <div class="pipeline-step" data-step="2">
                        <div class="step-header">
                            <span class="step-number">2</span>
                            <h3>üå≥ An√°lise Sint√°tica (Parser)</h3>
                            <span class="step-status">‚è≥</span>
                        </div>
                        <div class="step-description">
                            <p>Os tokens s√£o organizados em uma <strong>√Årvore Sint√°tica Abstrata (AST)</strong>.</p>
                            <p class="tech-detail">O parser verifica se a sequ√™ncia de tokens segue as regras gramaticais da linguagem.</p>
                        </div>
                        <div class="step-output" id="parserOutput">
                            <div class="output-placeholder">Aguardando an√°lise...</div>
                        </div>
                    </div>

                    <div class="pipeline-arrow">‚Üì</div>

                    <div class="pipeline-step" data-step="3">
                        <div class="step-header">
                            <span class="step-number">3</span>
                            <h3>üîç An√°lise Sem√¢ntica</h3>
                            <span class="step-status">‚è≥</span>
                        </div>
                        <div class="step-description">
                            <p>Verifica se o c√≥digo faz <strong>sentido l√≥gico</strong>.</p>
                            <p class="tech-detail">Checa tipos de dados, escopo de vari√°veis, e se fun√ß√µes/vari√°veis foram declaradas antes de serem usadas.</p>
                        </div>
                        <div class="step-output" id="semanticOutput">
                            <div class="output-placeholder">Aguardando an√°lise...</div>
                        </div>
                    </div>

                    <div class="pipeline-arrow">‚Üì</div>

                    <div class="pipeline-step" data-step="4">
                        <div class="step-header">
                            <span class="step-number">4</span>
                            <h3>‚öôÔ∏è Gera√ß√£o de C√≥digo Intermedi√°rio</h3>
                            <span class="step-status">‚è≥</span>
                        </div>
                        <div class="step-description">
                            <p>A AST √© convertida em <strong>bytecode</strong> ou c√≥digo intermedi√°rio.</p>
                            <p class="tech-detail">Este formato √© mais f√°cil de executar e otimizar que a AST original.</p>
                        </div>
                        <div class="step-output" id="irOutput">
                            <div class="output-placeholder">Aguardando an√°lise...</div>
                        </div>
                    </div>

                    <div class="pipeline-arrow">‚Üì</div>

                    <div class="pipeline-step" data-step="5">
                        <div class="step-header">
                            <span class="step-number">5</span>
                            <h3>üéØ Execu√ß√£o (Runtime)</h3>
                            <span class="step-status">‚è≥</span>
                        </div>
                        <div class="step-description">
                            <p>O c√≥digo intermedi√°rio √© <strong>executado</strong> pela m√°quina virtual.</p>
                            <p class="tech-detail">A VM interpreta cada instru√ß√£o e executa as opera√ß√µes correspondentes.</p>
                        </div>
                        <div class="step-output" id="executionOutput">
                            <div class="output-placeholder">Aguardando an√°lise...</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="detailed-explanation">
            <h2>üìö Explica√ß√£o Detalhada de Cada Etapa</h2>

            <div class="explanation-card">
                <div class="card-header">
                    <span class="card-icon">üìù</span>
                    <h3>1. An√°lise L√©xica (Lexer/Tokenizer)</h3>
                </div>
                <div class="card-content">
                    <p><strong>O que faz:</strong> Transforma o c√≥digo fonte (string) em uma sequ√™ncia de tokens.</p>
                    
                    <div class="example-box">
                        <h4>Exemplo:</h4>
                        <div class="code-comparison">
                            <div class="before">
                                <strong>Entrada:</strong>
                                <pre><code>say("hello world");</code></pre>
                            </div>
                            <div class="arrow">‚Üí</div>
                            <div class="after">
                                <strong>Sa√≠da (Tokens):</strong>
                                <pre><code>[
  { type: 'IDENTIFIER', value: 'say' },
  { type: 'LPAREN', value: '(' },
  { type: 'STRING', value: 'hello world' },
  { type: 'RPAREN', value: ')' },
  { type: 'SEMICOLON', value: ';' }
]</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="tech-details">
                        <h4>Como funciona:</h4>
                        <ul>
                            <li>L√™ o c√≥digo caractere por caractere</li>
                            <li>Ignora espa√ßos em branco e coment√°rios</li>
                            <li>Agrupa caracteres em tokens significativos</li>
                            <li>Identifica o tipo de cada token (palavra-chave, operador, literal, etc.)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="explanation-card">
                <div class="card-header">
                    <span class="card-icon">üå≥</span>
                    <h3>2. An√°lise Sint√°tica (Parser)</h3>
                </div>
                <div class="card-content">
                    <p><strong>O que faz:</strong> Organiza os tokens em uma estrutura hier√°rquica (AST) que representa a estrutura do programa.</p>
                    
                    <div class="example-box">
                        <h4>Exemplo:</h4>
                        <div class="ast-visualization">
                            <pre><code>CallExpression
‚îú‚îÄ‚îÄ callee: Identifier("say")
‚îî‚îÄ‚îÄ arguments:
    ‚îî‚îÄ‚îÄ StringLiteral("hello world")</code></pre>
                        </div>
                    </div>

                    <div class="tech-details">
                        <h4>Como funciona:</h4>
                        <ul>
                            <li>Consome tokens da esquerda para a direita</li>
                            <li>Aplica regras gramaticais da linguagem</li>
                            <li>Constr√≥i uma √°rvore que representa a estrutura do c√≥digo</li>
                            <li>Detecta erros de sintaxe (par√™nteses n√£o fechados, etc.)</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="explanation-card">
                <div class="card-header">
                    <span class="card-icon">üîç</span>
                    <h3>3. An√°lise Sem√¢ntica</h3>
                </div>
                <div class="card-content">
                    <p><strong>O que faz:</strong> Verifica se o c√≥digo faz sentido do ponto de vista l√≥gico.</p>
                    
                    <div class="example-box">
                        <h4>Verifica√ß√µes realizadas:</h4>
                        <ul class="check-list">
                            <li>‚úÖ A fun√ß√£o <code>say</code> existe?</li>
                            <li>‚úÖ O n√∫mero de argumentos est√° correto?</li>
                            <li>‚úÖ Os tipos de dados s√£o compat√≠veis?</li>
                            <li>‚úÖ As vari√°veis foram declaradas antes do uso?</li>
                        </ul>
                    </div>

                    <div class="tech-details">
                        <h4>Como funciona:</h4>
                        <ul>
                            <li>Percorre a AST verificando regras sem√¢nticas</li>
                            <li>Mant√©m uma tabela de s√≠mbolos (vari√°veis e fun√ß√µes declaradas)</li>
                            <li>Verifica compatibilidade de tipos</li>
                            <li>Detecta erros como vari√°veis n√£o declaradas ou tipos incompat√≠veis</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="explanation-card">
                <div class="card-header">
                    <span class="card-icon">‚öôÔ∏è</span>
                    <h3>4. Gera√ß√£o de C√≥digo Intermedi√°rio</h3>
                </div>
                <div class="card-content">
                    <p><strong>O que faz:</strong> Converte a AST em instru√ß√µes mais simples e otimizadas.</p>
                    
                    <div class="example-box">
                        <h4>Exemplo de Bytecode:</h4>
                        <pre><code>LOAD_CONST    "hello world"    ; Carrega a string
LOAD_GLOBAL   say              ; Carrega a fun√ß√£o say
CALL_FUNCTION 1                ; Chama com 1 argumento
POP_TOP                        ; Remove resultado da pilha</code></pre>
                    </div>

                    <div class="tech-details">
                        <h4>Como funciona:</h4>
                        <ul>
                            <li>Traduz cada n√≥ da AST em instru√ß√µes simples</li>
                            <li>Usa uma representa√ß√£o baseada em pilha</li>
                            <li>Aplica otimiza√ß√µes b√°sicas</li>
                            <li>Gera c√≥digo independente de plataforma</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="explanation-card">
                <div class="card-header">
                    <span class="card-icon">üéØ</span>
                    <h3>5. Execu√ß√£o (Runtime)</h3>
                </div>
                <div class="card-content">
                    <p><strong>O que faz:</strong> Executa as instru√ß√µes do bytecode usando uma m√°quina virtual.</p>
                    
                    <div class="example-box">
                        <h4>Processo de Execu√ß√£o:</h4>
                        <ol class="execution-steps">
                            <li>VM l√™ a instru√ß√£o <code>LOAD_CONST "hello world"</code></li>
                            <li>Empilha a string na pilha de operandos</li>
                            <li>L√™ <code>LOAD_GLOBAL say</code> e empilha a fun√ß√£o</li>
                            <li>Executa <code>CALL_FUNCTION 1</code>: desempilha fun√ß√£o e argumento, executa</li>
                            <li>A fun√ß√£o <code>say</code> imprime "hello world" no console</li>
                            <li><code>POP_TOP</code> remove o resultado da pilha</li>
                        </ol>
                    </div>

                    <div class="tech-details">
                        <h4>Como funciona:</h4>
                        <ul>
                            <li>Mant√©m uma pilha de operandos e frames de chamada</li>
                            <li>Executa instru√ß√µes em um loop (fetch-decode-execute)</li>
                            <li>Gerencia mem√≥ria para vari√°veis e objetos</li>
                            <li>Interage com fun√ß√µes nativas (como <code>say</code>)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <section class="architecture-section">
            <h2>üèóÔ∏è Arquitetura do Jech</h2>
            
            <div class="architecture-diagram">
                <div class="arch-layer">
                    <div class="layer-title">Frontend</div>
                    <div class="layer-components">
                        <div class="component">Lexer</div>
                        <div class="component">Parser</div>
                        <div class="component">Semantic Analyzer</div>
                    </div>
                </div>
                
                <div class="arch-arrow">‚Üì</div>
                
                <div class="arch-layer">
                    <div class="layer-title">Middle-end</div>
                    <div class="layer-components">
                        <div class="component">AST Optimizer</div>
                        <div class="component">IR Generator</div>
                    </div>
                </div>
                
                <div class="arch-arrow">‚Üì</div>
                
                <div class="arch-layer">
                    <div class="layer-title">Backend</div>
                    <div class="layer-components">
                        <div class="component">Virtual Machine</div>
                        <div class="component">Runtime Library</div>
                        <div class="component">Memory Manager</div>
                    </div>
                </div>
            </div>

            <div class="tech-stack">
                <h3>üõ†Ô∏è Stack Tecnol√≥gica</h3>
                <div class="tech-grid">
                    <div class="tech-item">
                        <strong>Linguagem Core:</strong>
                        <span>C</span>
                    </div>
                    <div class="tech-item">
                        <strong>Compila√ß√£o Web:</strong>
                        <span>Emscripten ‚Üí WebAssembly</span>
                    </div>
                    <div class="tech-item">
                        <strong>Interface:</strong>
                        <span>HTML5 + CSS3 + JavaScript</span>
                    </div>
                    <div class="tech-item">
                        <strong>Execu√ß√£o:</strong>
                        <span>WASM VM no Browser</span>
                    </div>
                </div>
            </div>
        </section>

        <section class="resources-section">
            <h2>üìñ Recursos Adicionais</h2>
            
            <div class="resources-grid">
                <a href="playground.html" class="resource-card">
                    <span class="resource-icon">üéÆ</span>
                    <h3>Playground</h3>
                    <p>Experimente o Jech no navegador e veja a execu√ß√£o em tempo real</p>
                </a>
                
                <a href="docs.html" class="resource-card">
                    <span class="resource-icon">üìö</span>
                    <h3>Documenta√ß√£o</h3>
                    <p>Aprenda a sintaxe e recursos da linguagem Jech</p>
                </a>
                
                <a href="https://github.com/joaoluke/jech" target="_blank" class="resource-card">
                    <span class="resource-icon">üíª</span>
                    <h3>C√≥digo Fonte</h3>
                    <p>Explore a implementa√ß√£o completa no GitHub</p>
                </a>
            </div>
        </section>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Jech</h4>
                    <p>Linguagem de programa√ß√£o educacional para aprender sobre interpretadores e compiladores.</p>
                </div>
                
                <div class="footer-section">
                    <h4>Links</h4>
                    <ul>
                        <li><a href="index.html">In√≠cio</a></li>
                        <li><a href="playground.html">Playground</a></li>
                        <li><a href="docs.html">Documenta√ß√£o</a></li>
                        <li><a href="internals.html">Como Funciona</a></li>
                        <li><a href="https://github.com/joaoluke/jech">GitHub</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>Tecnologias</h4>
                    <ul>
                        <li>C (Interpretador)</li>
                        <li>WebAssembly (Browser)</li>
                        <li>Emscripten (Compila√ß√£o)</li>
                        <li>HTML/CSS/JS (Interface)</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2026 Jech Programming Language. Open Source sob MIT License.</p>
            </div>
        </div>
    </footer>

    <script src="js/internals.js"></script>
</body>
</html>
